<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>StockCompetation</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/jquery-3.1.0.min.js"></script>
</head>
<body onload="update_time()">
    <h2>
      <span class="label label-default">現在時間：</span>
      <span class="label label-default" id="now_time">2016/08/29 17:11:20</span><br><br>
    </h2>


  <div class="form-group form-group-lg">
    <label class="col-sm-2 control-label" for="Check_In">目前第一名：</label>
    <div class="col-sm-3">
      <input class="form-control" type="text" id="checkInNumber" placeholder="報到前先點我">
    </div>
  </div>

    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
	  <h2 class="sub-header" id="check_result">報到資訊</h2>
	  <label for="text" >123</label>
	</div>


</body>


<script>



function Chick_in(){
    var input_card_number = document.getElementById("checkInNumber").value;
    $('#checkInNumber').attr('disabled',true);
    $('#checkInNumber').val("報到中~");
    $.get("https://script.google.com/macros/s/AKfycbzuR156rkxK9Vv7OuzQ9-ImBWCkz7HSOlWdeIXjvLsfS5iilQw/exec", {
                "card_number":input_card_number,
                "today":today,
                "time":time
            },
            function(data){
                var outputs = data.split(',');
                var result = "<strong>系統訊息：</strong>";
                result += outputs[1];
                $("#result").after("<div class='alert alert-success'>" + result + "</div><br>");

                $('#checkInNumber').attr('disabled',false);    
                $('#checkInNumber').val("");
                $('#checkInNumber').focus();        
            });
}

$('#checkInNumber').keydown(function(event){
    if( event.which == 13 ) {
        Chick_in();
    }
});









//  時間更新   取id = now_time
var d = new Date();
var today;
var time;

function update_time(){
    d = new Date(); 
    today = get_today(d);
    time = get_time(d);
    $('#now_time').text(today + ' ' +  time);
    setTimeout("update_time()",1000);
}


function get_today(d){
    var day = d.getDate();
    var year =  d.getFullYear();
    var month = d.getMonth()+1; 
    return year + '/' + (month<10 ? '0' : '') + month + '/' + (day<10 ? '0' : '') + day;
}
function get_time(d){
    var hour = d.getHours();
    var minute = d.getMinutes();
    var second = d.getSeconds();
    return (hour<10 ? '0' : '') + hour + ':' + (minute<10 ? '0' : '') + minute + ':' + (second<10 ? '0' : '') + second;
}


</script>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Read Date</title>
</head>
<body onload = "Chick_in()">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/jquery-3.1.0.min.js"></script>
    
    <div class="table-responsive">
        <table class="table table-striped" id="data">
            <thead id="table_head">
            </thead>
            <tbody id="table_body">
            </tbody>
        </table>
    </div>
    <script type="text/javascript">

        var data;
        var col,row;
        function updata_data(){
            $.get("https://script.google.com/macros/s/AKfycbxcu02-G4ZDRJYuPOIu5SU2v5J-ZqLLX0aZvVysE9oI1WeLCpov/exec", {},
                    function (input) {
                        data = input.split(',');

                        for(i=0 ; i<=data.length;i++){
                            if(data[i] == '1'){
                                col = i;//因陣列初始為0，但收尋到ID = 1 以為第二筆資料，固剛好抵銷 ( +1 -1)
                                break;
                            }
                        }
                        if(col == null){
                            alert('讀取資料錯誤');
                            return;
                        }
                        row = data.length/col;
                        update_display_data();
                    });
        }   
        function update_display_data(){
            var head_item = "";
            for(i =0;i<col;i++){
                head_item += "<td>";
                head_item += data[i];
                head_item += "</td>";
            }
            var head_data = $("<tr></tr>").html(head_item); 
            $('#table_head').append(head_data);

            for(i = 1;i<row;i++){
                var body_item = "";
                for(j=0;j<col;j++){
                    body_item += "<td>";
                    body_item += data[i*col+j];
                    body_item += "</td>";
                }
                var body_data = $("<tr></tr>").html(body_item); 
                $('#table_body').append(body_data);
            }
        }
        

    </script>
</body>
</html>

